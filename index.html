<html lang="et-EE" xml:lang="et" xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/styles.css">

    <script type="text/javascript" src="js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="js/bootstrap-tooltip.js"></script>
    <script type="text/javascript" src="js/bootstrap-popover.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="js/calc.js"></script>

</head>
<body>

<div id="conteiner" class="well well-white">

<form name="wage" method="post" >

<script type="text/javascript">
document.write('');
</script>
<noscript>
<div class="alert alert-error"><h4>VIGA!</h4> Veebisirvijas peab olema lubatud JavaScript!</div>
</noscript>

<fieldset>
<legend>Aasta</legend>  
  <div>
    <label class="radio inline">
      <input type="radio" name="year" value="2010" id="year2010">
      2010</label>
    <label class="radio  inline">
      <input type="radio" name="year" value="2011" id="year2011">
      2011</label>
    <label class="radio  inline">
      <input type="radio" name="year" value="2012" id="year2012">
      2012</label>
    <label class="radio  inline">
      <input type="radio" name="year" value="2013" id="year2013" checked="checked">
      2013</label>
  </div>
 
 </fieldset>
  <hr/>
  <div>
    <div class="span5 pull-left" style="margin:0; float:left">
  	<fieldset>
        <legend>LÃ¤hteandmed</legend>
        <div style="padding-bottom:20px">
          <label class="radio inline">
          <input type="radio" id="input_1" name="input" value="1" >TÃļÃļandja kulu</label>
           <a href="#" id="tip-1" data-toggle="popover"> <i class="icon-question-sign"></i></a>

		  <label class="radio inline">
          <input type="radio" id="input_2" name="input" value="2" checked="checked">Brutopalk</label>
            <a href="#" id="tip-2" data-toggle="popover"> <i class="icon-question-sign"></i></a>

		  <label class="radio inline">
          <input type="radio" id="input_3" name="input" value="3" >Netopalk</label>
           <a href="#" id="tip-3" data-toggle="popover"> <i class="icon-question-sign"></i></a>
        </div>
          <div>
          <input class="span2" id="eur" name="eur" value="0.0" type="text" onClick="this.value = '';">&nbsp;&euro;
          
      <select class="span2" id="period" name="period" >
	  <option value="1">tunnis</option>
	  <option value="2" selected="selected">kuus</option>
	  <option value="3" id="annual">aastas</option>
	</select>
    </div>      
          
	<div id="hours_row" style="display:none">
		<hr/>
		<label  class="inline" for="workhours">TÃļÃļtundide arv kuus
        <input class="span2" type="text" id="workhours" name="workhours" onClick="this.value = '';" value="" maxlength="4">
        </label>
    </div>              

     </fieldset>
	</div>

    <div class="span5">
    <fieldset>
        <legend>Mahaarvamised</legend>
    <div>
	 <input type="checkbox" id="taxfree_x" name="taxfree_x" value="true" checked="checked">
     <label class="checkbox inline" id="taxfreeLabel" for="taxfree_x">Arvesta maksuvaba tulu (144&euro; kuus)</label><a  href="#" id="tip-4" data-toggle="popover"> <i class="icon-question-sign"></i></a>
	</div>
  
  <div>
  <input type="checkbox" class="pull-left" id="ui1_x" name="ui1_x" value="true" checked="checked">
  <label class="checkbox inline" id="UIEmployerLabel" for="ui1_x">TÃļÃļandja tÃļÃļtuskindlustusmakse (1%)</label><a href="#" id="tip-5" data-toggle="popover"> <i class="icon-question-sign"></i></a>
  </div>
  <div>
	<input type="checkbox" class="pull-left" id="ui2_x" name="ui2_x" value="true" checked="checked">
    <label class="checkbox inline"  id="UIEmployeeLabel" for="ui2_x">TÃļÃļtaja (kindlustatu) tÃļÃļtuskindlustusmakse (2%)</label>
  </div>
  <div>  
	<input type="checkbox" class="pull-left" id="pension_x" name="pension_x" value="true" checked="checked">
    <label class="checkbox inline" id="fundedPensionLabel" for="pension_x">Kogumispension (II sammas)</label><a href="#" id="tip-6" data-toggle="popover">  <i class="icon-question-sign"></i></a>
 </div>   
    
    <div id="fp2011" style="display:none;">
	  <div style="padding-left:40px">
      <label class="radio" for="p1">
      <input type="radio" id="p1" name="fp2011" value="1" checked="checked">Ei esitanud 2009. a maksete jÃ¤tkamise avaldust</label>
      
      <label class="radio" for="p2">
	  <input type="radio" id="p2" name="fp2011" value="2" >Esitas 2009. a maksete jÃ¤tkamise avalduse</label>
	  
      <label class="radio" for="p3">
      <input type="radio" id="p3" name="fp2011" value="3" >Esitas maksete jÃ¤tkamise avalduse (s. 1942-1954)</label>
      </div>
    </div>
    
  </fieldset>
    
    </div>

  </div>

<div class="clearfix"></div>
<hr />

<div>
<table id="result" class="table">
<tr style="font-size:21px">
	<td width="50%" class="bordered">Tulemus
	<td width="25%" class="bordered" style="text-align:right">&euro;</td>
	<td width="25%" class="bordered" style="text-align:right" colspan="2">%</td>
</tr>
<tr>
	<td class="bordered">TÃļÃļandja kulu kokku (palgafond): </td>
	<td class="bordered"><input name="" id="wagefund" value="0.00" type="text" class="noinput bolded bigsize" /></td>
	<td class="bordered"><input name="" id="wagefund_pct" value="0.00" type="text" class="noinput" /></td>
	<td class="bordered"><input type="radio" id="pct1" name="percent" value="1" checked="checked"/></td>
</tr>

<tr>
	<td>Sotsiaalmaks: </td>
	<td><input name="" id="socialtax" value="0.00" type="text" class="noinput bolded" /></td>
	<td><input name="" id="socialtax_pct" value="0.00" type="text" class="noinput" /></td>
	<td></td>
</tr>
<tr>
	<td class="bordered">TÃļÃļtuskindlustusmakse (tÃļÃļandja): </td>
	<td class="bordered"><input name="" id="ui_employer" value="0.00" type="text" class="noinput bolded" /></td>
	<td class="bordered"><input name="" id="ui_employer_pct" value="0.00" type="text" class="noinput" /></td>
	<td  class="bordered"></td>
</tr>

<tr>
	<td  class="bordered">Brutopalk: </td>
	<td  class="bordered"><input name="" id="grosswage" value="0.00" type="text" class="noinput bolded bigsize" /></td>
	<td  class="bordered"><input name="" id="grosswage_pct" value="0.00" type="text" class="noinput" /></td>
	<td  class="bordered"><input type="radio" id="pct2" name="percent" value="2" /></td>
</tr>

<tr>
	<td>Kogumispension (II sammas): </td>
	<td><input name="" id="fpp_1" value="0.00" type="text" class="noinput bolded" /></td>
	<td><input name="" id="fpp_1_pct" value="0.00" type="text" class="noinput" /></td>
	<td></td>
</tr>
<tr>
	<td vAlign="top">TÃļÃļtuskindlustusmakse (tÃļÃļtaja): </td>
	<td><input name="" id="ui_employee" value="0.00" type="text" class="noinput bolded" /></td>
	<td><input name="" id="ui_employee_pct" value="0.00" type="text" class="noinput" /></td>
	<td></td>
</tr>
<tr>
	<td class="bordered">Tulumaks: </td>
	<td class="bordered"><input name="" id="incometax" value="0.00" type="text" class="noinput bolded" /></td>
	<td class="bordered"><input name="" id="incometax_pct" value="0.00" type="text" class="noinput" /></td>
	<td class="bordered"></td>
</tr>

<tr>
	<td class="bordered">Netopalk: </td>
	<td class="bordered"><input name="" id="netwage" value="0.00" type="text" class="noinput bolded bigsize" /></td>
	<td class="bordered"><input name="" id="netwage_pct" value="0.00" type="text" class="noinput" /></td>
	<td class="bordered"><input type="radio" id="pct3" name="percent" value="3" /></td>
</tr>

</table>
<input type="hidden" id="taxes" />
<input type="hidden" id="localtaxes" />
<input type="hidden" id="pension" />

<div id="chart_div"></div>
</div>

</form>

</div>


<script type="text/javascript">

    function SetTaxFreeLabel(year) {
        var label = "";
        if(Number(year) > 2010) {
            label = "Arvesta maksuvaba tulu (144&euro; kuus)";
        }
        else {
            label = "Arvesta maksuvaba tulu (2250 kr / &euro;143.8 kuus)";
        }
        $("#taxfreeLabel").text(label);
    }

    function SetFundedPensionLabel(year) {
        var label = "";
        if(Number(year) == 2010) {
            label = "Töötaja on esitanud pensioni II samba maksete jätkamise avalduse";
        }
        else {
            label = "Kogumispension (II sammas)";
        }

        $("#fundedPensionLabel").text(label);
    }

    function SetUILabels(year) {
        var employerLabel = "";
        var employeeLabel = "";

        if (Number(year) == 2013) {
            employerLabel = "Tööandja töötuskindlustusmakse (1%)";
            employeeLabel = "Töötaja (kindlustatu) töötuskindlustusmakse (2%)";
        }
        else {
            employerLabel = "Tööandja töötuskindlustusmakse (1,4%)";
            employeeLabel = "Töötaja (kindlustatu) töötuskindlustusmakse (2,8%)";
        }

        $("#UIEmployerLabel").text(employerLabel);
        $("#UIEmployeeLabel").text(employeeLabel);
    }

    function GetRadiobuttonValue(fieldName) {
        var value = '';
        var radios = $('form[name="wage"] :radio').filter(':checked');

        radios.each(function(index){
            if($(this).attr('name') == fieldName){
                value = $(this).val();
            }
        });
        return value;
    }

    function toggleRowVisibility(show) {
        $("#hours_row").css("display", show ? "table-row" : "none");
    }

    function toggleRadioVisibility(year, show) {
        var fp2011 = $("#fp2011");
        var pension_x = $("#pension_x");

        if(Number(year) == 2011 && pension_x.attr("checked")) {
            fp2011.css("display", "table-row");
        }
        else {
            fp2011.css("display", "none");
        }
    }

    // draw google chart
    google.load('visualization', '1', {'packages':['corechart']});
    google.setOnLoadCallback(drawChart);

    function drawChart() {

        var A = getFieldFloatValue("taxes");
        var B = getFieldFloatValue("localtaxes");
        var C = getFieldFloatValue("netwage");
        var D = getFieldFloatValue("pension");

        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        data.addRows([
            ['Riigile laekub maksudena', A],
            ['KOV-le laekub maksudena', B],
            ['Töötaja saab palgana kätte', C],
            ['Kogumispensioni fondi laekub', D]
        ]);

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        var options = {
            width: 500,
            height: 200,
            colors: ['#cc0000', '#2e5e20', '#3085b3', '#abd5ff'],
            backgroundColor: '#e9f2f5',
            is3D: true,
            legend: 'right',
            legendTextStyle: {color: '#3085b3'},
            chartArea:{width:"100%",height:"100%"}
        };

        chart.draw(data, options);
    }

$(function (){

    $("[id*='year']").each(function(index){
        $(this).click(function(){
            toggleRadioVisibility(GetRadiobuttonValue('year'), index == 0);
            SetTaxFreeLabel($(this).val());
            SetUILabels($(this).val());
            SetFundedPensionLabel($(this).val());
            taxCalc();
            drawChart();
        });

        $(this).keyup(function(){
            taxCalc();
            drawChart();
        });

        $(this).change(function(){
            taxCalc();
            drawChart();
        });
    });

    $("[id*='input_']").each(function(index){
        $(this).click(function(){
            taxCalc();
            drawChart();
        });

        $(this).keyup(function(){
            taxCalc();
            drawChart();
        });

        $(this).change(function(){
            taxCalc();
            drawChart();
        });
    });

    var period = $("#period")
    period.click(function(){
        toggleRowVisibility(this.selectedIndex == 0);
        taxCalc();
        drawChart();
    });

    period.keyup(function(){
        toggleRowVisibility(this.selectedIndex == 0);
        taxCalc();
        drawChart();
    });

    period.change(function(){
        toggleRowVisibility(this.selectedIndex == 0);
        taxCalc();
        drawChart();
    });

    $("#eur").each(function(){
        $(this).keyup(function(){
            taxCalc();
            drawChart();
        });

        $(this).change(function(){
            taxCalc();
            drawChart();
        });
    });

    $("#workhours").keyup(function(){
        taxCalc();
        drawChart();
    });

    $("[name='fp2011']").each(function(index){
        $(this).click(function(){
            taxCalc();
            drawChart();
        });

        $(this).change(function(){
            taxCalc();
            drawChart();
        });
    });

    $("[name*='ui']").each(function(){
        $(this).click(function(){
            taxCalc();
            drawChart();
        });

        $(this).change(function(){
            taxCalc();
            drawChart();
        });

        $(this).keyup(function(){
            taxCalc();
            drawChart();
        });
    });

    $("#taxfree_x").click(function(){
        taxCalc();
        drawChart();
    });

    $("#taxfree_x").keyup(function(){
        taxCalc();
        drawChart();
    });

    $("#taxfree_x").change(function(){
        taxCalc();
        drawChart();
    });

    $("#pension_x").click(function(){
        toggleRadioVisibility(GetRadiobuttonValue('year'), false);
        taxCalc();
        drawChart();
    });

    $("#pension_x").change(function(){
        toggleRadioVisibility(GetRadiobuttonValue('year'), false);
        taxCalc();
        drawChart();
    });

    $("[id*='pct']").each(function(index){
        $(this).click(function(){
            taxCalc();
        });

        $(this).change(function(){
            taxCalc();
        });

        $(this).keyup(function(){
            taxCalc();
        });
    });

    $("#tip-1").popover({
        placement : 'right',
        trigger: 'hover',
        html: 'true',
        title: 'TÃļÃļandja kulu',
        content :'TÃļÃļandja kogukulu, sealhulgas tÃļÃļtajale tÃļÃļ eest makstav tÃļÃļtasu, muud tasud ning hÃŧvitised koos kÃĩigi maksude ja maksetega.'
    });

    $("#tip-2").popover({
        placement : 'right',
        trigger: 'hover',
        html: 'true',
        title: 'Brutopalk',
        content :'TÃļÃļlepingus vÃĩi Ãĩigusaktis kindlaks mÃ¤Ã¤ratud tÃļÃļtasu, sealhulgas majandustulemustelt ja tehingutelt makstav tasu, mille hulka on arvutatud seaduse alusel kinnipidamisele kuuluvad maksud ja maksed (s.h. tulumaks, tÃļÃļtaja (kindlustatu) tÃļÃļtuskindlustusmakse ning kogumispensioni teise sambaga liitumise korral kogumispensioni makse), muud tasud ning hÃŧvitised. 2013. aastal on tÃļÃļtasu alammÃ¤Ã¤raks tÃ¤istÃļÃļajaga tÃļÃļtamise korral tunnis 1,90 eurot ja kuus 320 eurot.'
    });

    $("#tip-3").popover({
        placement : 'right',
        trigger: 'hover',
        html: 'true',
        title: 'Netopalk',
        content :'TÃļÃļtasu ning muude tasude ning hÃŧvitiste summa, mille tÃļÃļtaja saab kÃ¤tte pÃ¤rast maksude ning maksete  maha arvamist.'
    });

    $("#tip-4").popover({
        placement : 'left',
        trigger: 'hover',
        html: 'true',
        title: 'Maksuvaba tulu',
        content :'Eesti residendist fÃŧÃŧsilise isiku maksustamisperioodi tulust maha arvatav maksuvaba tulu.Maksuvaba tulu on alates 2011. aastast 1728 &euro; aastas.'
    });

    $("#tip-5").popover({
        placement : 'left',
        trigger: 'hover',
        html: 'true',
        title: 'TÃļÃļtuskindlustusmakse',
        content :'TÃļÃļandja tÃļÃļtuskindlustusmakse mÃ¤Ã¤r 2013. aastal on 1%. TÃļÃļtaja (kindlustatu) tÃļÃļtuskindlustusmakse mÃ¤Ã¤r 2013. aastal on 2%.'
    });

    $("#tip-6").popover({
        placement : 'left',
        trigger: 'hover',
        html: 'true',
        title: 'Kogumispensioni makse',
        content :'Makset on kohustatud tasuma kogumispensioni II sambaga vabatahtlikult liitunud vÃĩi seadusega kohustatud residendist fÃŧÃŧsiline isik (kes on esitanud maksete jÃ¤tkamise avalduse), kui tema elukoht on Eestis vÃĩi kui ta viibib Eestis 12 jÃ¤rjestikuse kalendrikuu jooksul vÃ¤hemalt 183 pÃ¤eva. Makse mÃ¤Ã¤raks on 2% kogumispensionide seaduse Â§ 7 lÃĩikes 1 nimetatud summadelt.'
    });
});
</script>

</body>
</html>